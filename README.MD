# Telegram-бот dvmn.org

Telegram-бот который отправляет уведомления в случае проверки Вашей работы на dvmn.org.

Скрипт использует [API devman.org](https://dvmn.org/api/docs/) и [Telegram Bot API](https://core.telegram.org/bots/api). Если задание проверено, Telegram-бот посылает Вам сообщение, в котором содержится результат проверки и ссылка на само задание.

## Требования к окружению

- ОС: Linux / Windows 7 и выше
- Интерпртатор Python 3.8 и выше

## Как установить

1. На странице https://dvmn.org/api/docs/ получите Ваш *персональный токен* к API Девмана.
2. Зарегистрируйте бота в Telegram с помощью [Отца ботов](https://telegram.me/BotFather), получите его *API ключ*.
(Как обойти блокировку Telegram - https://bigpicture.ru/?p=913797)
3. Получите свой *chat_id* - напишите в Telegram специальному боту: @userinfobot.
4. Создайте файл `.env` в папке с проектом. Откройте в текстовом редакторе и запишите переменные окужения:
```
DEVMAN_API_TOKEN=<my_devman_token>
TELEGRAM_API_TOKEN=<my_telegram_bot_token>
TELEGRAM_CHAT_ID=<my_telegram_chat_id>
```
вместо __`<my_devman_token>`__ и __`my_telegram_bot_token`__ подставьте свои персональный токен Девмана и токен Telegram соответственно, а вместо `<my_telegram_chat_id>` - ваш chat_id.

5.  Для установки зависимостей используйте `pip` (или `pip3`, есть есть конфликт с Python2):
```
pip install -r requirements.txt
```


## Деплой на Heroku

1. Создайте приложение на Heroku.
2. Привяжите к приложению репозиторий на вкладке Deploy.
3. В корне проекта есть файл Procfile. Он необходим для запуска бота на Heroku!
На вкладке Resources включите процесс.
4. Заполните Config Vars на вкладке Settings - добавьте все переменные из файла .env (см. п. 4 Раздела "Как установить").
5. Настраивать Proxy не нужно.
6. Для запуска бота нажмите кнопку "Deploy Branch" на вкладке Deploy.

## Настройка Proxy

При необходимости настройте Proxy. Скрипт может брать настройки Proxy из переменной окружения.

В ОС Windows в командной строке выполните команду:
```
set HTTPS_PROXY=socks5h://110.49.101.58:1080
```
В ОС Linux в терминале выполните команду:
```
export HTTPS_PROXY=socks5h://110.49.101.58:1080
```
Вместо *socks5h://110.49.101.58:1080* можно использовать любой другой рабочий Proxy.
Список рабочих прокси:

- socks5h://110.49.101.58:1080
- socks5h://185.126.200.143:1080
- socks5h://207.97.174.134:1080
- socks5h://67.201.33.5:4145
- socks5h://192.169.231.160:41155

Еще [список Proxy](http://spys.one/proxies/)

## Использование

В консоли перейдите в папку с проектом, и выполните команду:
```
python main.py
```
Отошлите задание на проверку. Когда задание будет проверено - Вам в Телеграм придет сообщение от бота с результатом проверки.

## Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
